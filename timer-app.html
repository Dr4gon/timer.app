<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />

    <style>
      :root {
        --c-primary: #0077b4;
        --c-accent: #edc726;
      }

      body,
      html {
        padding: 0;
        margin: 0;
        user-select: none;
        -webkit-user-select: none;
        font-family: Helvetica, sans-serif;
        text-align: center;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;
        height: 100%;
      }

      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 10px;
        box-sizing: border-box;
        -webkit-transition: background 0.5s ease-out;
        transition: background 0.5s ease-out;
      }

      body:before {
        content: "";
        position: absolute;
        top: 0px;
        left: 0px;
        height: 10px;
        width: 100%;
        z-index: 100;
        background: linear-gradient(
          to right,
          var(--c-primary) 50%,
          var(--c-accent) 50%
        );
      }

      #clock {
        flex: 1;
        min-height: 0;
        width: 100%;
      }

      .digit {
        font-size: 7px;
        color: var(--c-primary) !important;
      }

      #swatchPrimary {
        fill: var(--c-primary);
      }

      #swatchAccent,
      #path,
      #titleh1,
      #display {
        fill: var(--c-accent);
      }

      .off {
        pointer-events: none;
      }

      #startstop {
        flex-shrink: 0;
        width: min(800px, calc((100vh - 110px) * 0.77));
        height: 8vh;
        margin: 8px auto 12px;
        background: var(--c-primary) !important;
        border-radius: 50px;
        color: white;
        line-height: 8vh;
        font-weight: bold;
        border: none;
        outline: none;
        font-size: clamp(14px, 2.5vh, 26px);
        letter-spacing: 0.1em;
        cursor: pointer;
      }

      #startstop.go {
        background: #00af88;
      }
      #startstop.stop {
        background: #e3223d;
      }

      .alarming {
        -webkit-animation: alarmAnimation 0.5s infinite alternate ease-in-out;
        -moz-animation: alarmAnimation 0.5s infinite alternate ease-in-out;
        -o-animation: alarmAnimation 0.5s infinite alternate ease-in-out;
        animation: alarmAnimation 0.5s infinite alternate ease-in-out;
      }

      @-webkit-keyframes alarmAnimation {
        from {
          background: #fff;
        }
        to {
          background: #e3223d;
        }
      }
      @-moz-keyframes alarmAnimation {
        from {
          background: #fff;
        }
        to {
          background: #e3223d;
        }
      }
      @-o-keyframes alarmAnimation {
        from {
          background: #fff;
        }
        to {
          background: #e3223d;
        }
      }
      @keyframes alarmAnimation {
        from {
          background: #fff;
        }
        to {
          background: #e3223d;
        }
      }

      #audioalarm {
        display: none;
      }

      #github-banner {
        flex-shrink: 0;
        width: 100%;
        padding: 8px 0 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-size: 12px;
        color: #888;
      }

      #github-banner a {
        display: inline-flex;
        align-items: center;
        color: var(--c-primary);
        text-decoration: none;
        transition: opacity 0.2s;
      }

      #github-banner a:hover {
        opacity: 0.6;
      }

      #github-banner svg {
        width: 22px;
        height: 22px;
        fill: var(--c-primary);
      }
    </style>
  </head>
  <body>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      version="1.1"
      id="clock"
      viewBox="0 0 100 130"
      data-time="868"
    >
      <rect x="0" y="10" width="100" height="100" fill="#d7e1eb"></rect>
      <rect x="2.5" y="12.5" width="95" height="95" fill="#d7e1eb"></rect>

      <circle
        id="swatchPrimary"
        cx="6.5"
        cy="5"
        r="3.5"
        style="cursor: pointer"
      />

      <text
        x="50"
        y="5"
        id="titleh1"
        text-anchor="middle"
        alignment-baseline="middle"
        font-size="5"
        style="cursor: pointer"
      ></text>

      <circle
        id="swatchAccent"
        cx="93.5"
        cy="5"
        r="3.5"
        style="cursor: pointer"
      />

      <text
        x="50"
        y="20"
        class="digit"
        data-time="60"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        0
      </text>
      <text
        x="30"
        y="25.359"
        class="digit"
        data-time="5"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        5
      </text>
      <text
        x="15.359"
        y="40"
        class="digit"
        data-time="10"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        10
      </text>
      <text
        x="10"
        y="60"
        class="digit"
        data-time="15"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        15
      </text>
      <text
        x="15.359"
        y="80"
        class="digit"
        data-time="20"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        20
      </text>
      <text
        x="30"
        y="94.641"
        class="digit"
        data-time="25"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        25
      </text>
      <text
        x="50"
        y="100"
        class="digit"
        data-time="30"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        30
      </text>
      <text
        x="70"
        y="94.641"
        class="digit"
        data-time="35"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        35
      </text>
      <text
        x="84.641"
        y="80"
        class="digit"
        data-time="40"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        40
      </text>
      <text
        x="90"
        y="60"
        class="digit"
        data-time="45"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        45
      </text>
      <text
        x="84.641"
        y="40"
        class="digit"
        data-time="50"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        50
      </text>
      <text
        x="70"
        y="25.359"
        class="digit"
        data-time="55"
        text-anchor="middle"
        alignment-baseline="middle"
      >
        55
      </text>

      <path
        id="path"
        d="M 50 60 v -35 A 35 35 1 0 0 15.054756481091289 58.0447592615064 z"
      ></path>
      <circle id="centerpoint" cx="50" cy="60" r="2" fill="#000000"></circle>
      <rect
        x="0"
        y="10"
        width="50"
        height="100"
        fill="rgba(0,0,0,.05)"
        class="off"
      ></rect>

      <text
        id="display"
        x="50"
        y="120"
        text-anchor="middle"
        alignment-baseline="middle"
        font-size="10"
        style="cursor: pointer"
      >
        00:14:27
      </text>
    </svg>

    <button id="startstop" class="go">Go for it!</button>

    <div id="github-banner">
      Made by &#128050; with Open-Source &#x2665;&#xfe0f; Contributions,
      feedback, or simply say hello
      <a
        href="https://github.com/Dr4gon/timer.app"
        target="_blank"
        rel="noopener noreferrer"
        title="GitHub"
      >
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"
          />
        </svg>
      </a>
    </div>

    <script>
      var DEFAULT_PRIMARY = "#0077b4";
      var DEFAULT_ACCENT = "#edc726";
      var DEFAULT_TITLE = "SCRUM Timer";

      document.querySelector("#titleh1").textContent = DEFAULT_TITLE;

      document.addEventListener("touchmove", function (e) {
        e.preventDefault();
      });

      var clock = document.querySelector("#clock"),
        svgpath = document.querySelector("#path"),
        display = document.querySelector("#display"),
        startStop = document.querySelector("#startStop"),
        alarm = document.querySelector("#audioalarm"),
        centerpoint = document.querySelector("#centerpoint"),
        tickInterval = null,
        startTime = 0,
        startValue = 0;

      // Convert a mouse/touch event to SVG coordinate space
      function toSVGPoint(e) {
        var pt = clock.createSVGPoint();
        var src = e.touches ? e.touches[0] : e;
        pt.x = src.clientX;
        pt.y = src.clientY;
        return pt.matrixTransform(clock.getScreenCTM().inverse());
      }

      // Compute clock angle in seconds from an SVG-space point
      function svgPointToSeconds(pt) {
        var dx = pt.x - 50; // SVG clock center: (50, 60)
        var dy = pt.y - 60;
        var a = (Math.atan2(dy, dx) * 180) / Math.PI;
        a += 90;
        a = a > 0 ? a - 360 : a;
        return a * -10;
      }

      start_event = function (e) {
        var pt = toSVGPoint(e);
        // Only react within the gray square (SVG x: 0-100, y: 10-110)
        if (pt.x < 0 || pt.x > 100 || pt.y < 10 || pt.y > 110) return;

        this._isPressed = true;
        stopTimer();
        renderClock(svgPointToSeconds(pt));
      };

      clock.addEventListener("touchstart", start_event);
      clock.addEventListener("mousedown", start_event);

      move_event = function (e) {
        e.preventDefault();
        if (!this._isPressed) return;

        var pt = toSVGPoint(e);
        renderClock(svgPointToSeconds(pt));
      };

      clock.addEventListener("touchmove", move_event);
      clock.addEventListener("mousemove", move_event);

      end_event = function (e) {
        this._isPressed = false;
        if (startStop.getAttribute("class").match("stop")) {
          startValue = clock.getAttribute("data-time");
          startTime = new Date().getTime();
          startTimer();
        }
      };

      clock.addEventListener("touchend", end_event);
      clock.addEventListener("mouseup", end_event);

      digit_event = function (e) {
        e.stopPropagation();
        var t = this.getAttribute("data-time");
        renderClock(t * 60);
      };

      var digits = document.querySelectorAll(".digit");
      for (i = 0; i < digits.length; i++) {
        digits[i].addEventListener("mousedown", digit_event);
        digits[i].addEventListener("touchstart", digit_event);
      }

      startStopEvent = function () {
        console.log("#########sdsdsd");
        var classNow = this.getAttribute("class");
        if (classNow.match("go")) {
          this.setAttribute("class", classNow.replace(/go/, "stop"));
          this.textContent = document.body.classList.contains("bomb-mode")
            ? "Tock!"
            : "Wait for it!";
          startValue = clock.getAttribute("data-time");
          if (startValue <= 1) {
            renderClock(60 * 15);
          }
          startTime = new Date().getTime();
          localStorage.setItem(
            "timerState",
            JSON.stringify({ startValue: startValue, startTime: startTime })
          );
          startTimer();
        } else if (classNow.match("stop")) {
          this.setAttribute("class", classNow.replace(/stop/, "go"));
          this.textContent = document.body.classList.contains("bomb-mode")
            ? "Tick!"
            : "Go for it!";
          localStorage.removeItem("timerState");
          document.body.removeAttribute("class");
          stopTimer();
        }
      };

      //startStop.addEventListener("touchstart",startStopEvent);
      startStop.addEventListener("mousedown", startStopEvent);

      startTimer = function () {
        if (tickInterval != null) {
          window.clearInterval(tickInterval);
        }
        startTime = new Date().getTime();
        startValue = clock.getAttribute("data-time");
        tickInterval = window.setInterval(tick, 1000);
      };

      stopTimer = function () {
        if (tickInterval != null) {
          window.clearInterval(tickInterval);
          tickInterval = null;
        }
      };

      renderClock = function (seconds) {
        var txtsec = seconds;
        seconds = Math.max(seconds, 0);

        clock.setAttribute("data-time", Math.round(seconds));

        var deg = seconds / 10;
        deg = Math.max(0, deg);
        deg = Math.min(360, deg);
        deg = 360 - deg;

        var l = 35;

        var r = (deg * Math.PI) / 180,
          x = 50.0001 + Math.sin(r) * l,
          y = 60 + Math.cos(r) * -l,
          mid = deg > 180 ? 0 : 1,
          anim =
            "M 50 60 v -" +
            l +
            " A " +
            l +
            " " +
            l +
            " 1 " +
            mid +
            " 0 " +
            x +
            " " +
            y +
            " z";

        svgpath.setAttribute("d", anim);

        var min = Math.floor(txtsec / 60);
        var sec = Math.floor(txtsec - min * 60);
        var txt = "00:" + ("0" + min).substr(-2) + ":" + ("0" + sec).substr(-2);

        display.textContent = txt;
      };

      tick = function () {
        if (clock._isPressed) {
          return;
        }
        var diff = new Date().getTime() - startTime;
        diff = Math.floor(diff / 1000);
        var val = startValue - diff;

        renderClock(val);

        if (val <= 0) {
          fireAlarm();
        }
      };

      fireAlarm = function () {
        var isBomb = document.body.classList.contains("bomb-mode");
        document.body.setAttribute("class", "alarming");

        try {
          var audio = new Audio("Alarm.mp3");
          audio.play();
          //	alarm.play();
        } catch (e) {
          console.log("Error while playing alarm", e);
        }
        startStop.setAttribute("class", "go");
        startStop.textContent = isBomb ? "Tick!" : "Go for it!";
        localStorage.removeItem("timerState");
        setTimeout(function () {
          document.body.removeAttribute("class");
        }, 5000);
        stopTimer();
      };

      // ------------------ Start of Editing the title ------------------
      (function () {
        var titleEl = document.querySelector("#titleh1");

        // Create a temporary input field to receive the new title
        var input = document.createElement("input");
        input.type = "text";
        Object.assign(input.style, {
          position: "fixed",
          display: "none",
          zIndex: "1000",
          background: "transparent",
          border: "none",
          borderBottom: "2px solid " + DEFAULT_ACCENT,
          color: DEFAULT_ACCENT,
          fontFamily: "Helvetica, sans-serif",
          fontWeight: "bold",
          textAlign: "center",
          outline: "none",
          padding: "0",
          margin: "0",
          boxSizing: "border-box",
        });
        document.body.appendChild(input);

        // Prevent the default behaviour
        titleEl.addEventListener("mousedown", function (e) {
          e.stopPropagation();
        });

        // When the title is clicked, show the input field and hide the title
        titleEl.addEventListener("click", function (e) {
          e.stopPropagation();
          var rect = titleEl.getBoundingClientRect();
          Object.assign(input.style, {
            display: "block",
            left: rect.left + "px",
            top: rect.top + "px",
            width: rect.width + "px",
            height: rect.height + "px",
            fontSize: rect.height * 0.75 + "px",
          });
          input.value = titleEl.textContent.trim();
          titleEl.style.visibility = "hidden";
          input.focus();
          input.select();
        });

        // Accept changes and restore original state
        function commit() {
          var newTitle = input.value.trim();
          input.style.display = "none";
          titleEl.style.visibility = "visible";
          if (newTitle) titleEl.textContent = newTitle;
        }

        // Make sure Enter is accounted for as final input
        input.addEventListener("keydown", function (e) {
          if (e.key === "Enter") input.blur();
        });
        input.addEventListener("blur", commit);
      })();

      // ------------------ End of Editing the title ------------------

      // -------------- Start of Editing the timer time ---------------
      (function () {
        var displayEl = document.querySelector("#display");

        // Create a temporary input field to receive the new timestamp
        var input = document.createElement("input");
        input.type = "text";
        input.placeholder = "MM:SS";
        Object.assign(input.style, {
          position: "fixed",
          display: "none",
          zIndex: "1000",
          background: "transparent",
          border: "none",
          borderBottom: "2px solid " + DEFAULT_ACCENT,
          color: DEFAULT_ACCENT,
          fontFamily: "Helvetica, sans-serif",
          fontWeight: "bold",
          textAlign: "center",
          outline: "none",
          padding: "0",
          margin: "0",
          boxSizing: "border-box",
        });
        document.body.appendChild(input);

        // Prevent the default behaviour
        displayEl.addEventListener("mousedown", function (e) {
          e.stopPropagation();
        });

        // Allow click to trigger input change
        displayEl.addEventListener("click", function (e) {
          e.stopPropagation();
          stopTimer();
          var rect = displayEl.getBoundingClientRect();
          Object.assign(input.style, {
            display: "block",
            left: rect.left + "px",
            top: rect.top + "px",
            width: rect.width + "px",
            height: rect.height + "px",
            fontSize: rect.height * 0.75 + "px",
          });
          input.value = displayEl.textContent.trim();
          displayEl.style.visibility = "hidden";
          input.focus();
          input.select();
        });

        // Validate input and convert to seconds
        function parseTime(str) {
          var parts = str.trim().split(":").map(Number);
          if (parts.some(isNaN)) return null;
          if (parts.length === 2) return parts[0] * 60 + parts[1];
          if (parts.length === 3)
            return parts[0] * 3600 + parts[1] * 60 + parts[2];
          return null;
        }

        // Save changes
        function commit() {
          var seconds = parseTime(input.value);
          input.style.display = "none";
          displayEl.style.visibility = "visible";
          if (seconds !== null && seconds >= 0) renderClock(seconds);
        }

        // Consider enter and escape behaviour for the input field
        input.addEventListener("keydown", function (e) {
          if (e.key === "Enter") input.blur();
          if (e.key === "Escape") {
            input.style.display = "none";
            displayEl.style.visibility = "visible";
          }
        });
        input.addEventListener("blur", commit);
      })();
      // --------------- End of Editing the timer time ---------------

      // ------------------ Color Pickers ------------------
      (function () {
        // Hidden color inputs
        function makeHiddenInput(id, value) {
          var el = document.createElement("input");
          el.type = "color";
          el.id = id;
          el.value = value;
          Object.assign(el.style, {
            position: "fixed",
            opacity: "0",
            width: "0",
            height: "0",
            pointerEvents: "none",
          });
          document.body.appendChild(el);
          return el;
        }
        var inputPrimary = makeHiddenInput("colorPrimary", DEFAULT_PRIMARY);
        var inputAccent = makeHiddenInput("colorAccent", DEFAULT_ACCENT);

        function applyColors(c1, c2) {
          document.documentElement.style.setProperty("--c-primary", c1);
          document.documentElement.style.setProperty("--c-accent", c2);
        }

        function positionInput(input, swatch) {
          var rect = swatch.getBoundingClientRect();
          Object.assign(input.style, {
            left: rect.left + rect.width / 2 + "px",
            top: rect.top + rect.height / 2 + "px",
            width: "1px",
            height: "1px",
          });
        }

        var swatchPrimary = document.getElementById("swatchPrimary");
        var swatchAccent = document.getElementById("swatchAccent");

        // Pre-position on load and on resize so first click is already correct
        function syncPositions() {
          positionInput(inputPrimary, swatchPrimary);
          positionInput(inputAccent, swatchAccent);
        }
        syncPositions();
        window.addEventListener("resize", syncPositions);

        // Circles open the hidden color picker
        swatchPrimary.addEventListener("mousedown", function (e) {
          e.stopPropagation();
        });
        swatchPrimary.addEventListener("click", function (e) {
          e.stopPropagation();
          inputPrimary.click();
        });
        swatchAccent.addEventListener("mousedown", function (e) {
          e.stopPropagation();
        });
        swatchAccent.addEventListener("click", function (e) {
          e.stopPropagation();
          inputAccent.click();
        });

        inputPrimary.addEventListener("input", function () {
          applyColors(this.value, inputAccent.value);
        });
        inputAccent.addEventListener("input", function () {
          applyColors(inputPrimary.value, this.value);
        });
      })();
      // ------------------ End Color Pickers ------------------

      var restore = localStorage.getItem("timerState");

      if (restore) {
        try {
          var r = JSON.parse(restore);
          startValue = parseFloat(r.startValue);
          startTime = parseInt(r.startTime);

          var diff = new Date().getTime() - startTime;
          diff = Math.floor(diff / 1000);
          var val = startValue - diff;

          renderClock(val);

          startStop.setAttribute("class", "stop");
          startStop.textContent = "Wait for it!";
          startTimer();
        } catch (e) {
          stopTimer();
          renderClock(2700);
        }
      } else {
        renderClock(2700);
      }
    </script>

    <!-- ============ EASTER EGG: BOMB MODE (Ctrl+B) ============= -->
    <script>
      (function () {
        // Generate polygon points for a starburst shape
        function burstPoints(cx, cy, rOuter, rInner, n) {
          var pts = [];
          for (var i = 0; i < n * 2; i++) {
            var a = (i * Math.PI) / n - Math.PI / 2;
            var r = i % 2 === 0 ? rOuter : rInner;
            pts.push(
              (cx + r * Math.cos(a)).toFixed(2) +
                "," +
                (cy + r * Math.sin(a)).toFixed(2)
            );
          }
          return pts.join(" ");
        }

        var bombActive = false;
        var svg = document.getElementById("clock");
        var ns = "http://www.w3.org/2000/svg";

        // --- Inject bomb mode CSS ---
        var css = document.createElement("style");
        css.textContent =
          "body.bomb-mode { background: #0d0d1a !important; }" +
          "body.bomb-mode::before { display: none; }" +
          "body.bomb-mode #clock-bg-1," +
          "body.bomb-mode #clock-bg-2," +
          "body.bomb-mode .digit," +
          "body.bomb-mode #path," +
          "body.bomb-mode #centerpoint," +
          "body.bomb-mode #clock-half," +
          "body.bomb-mode #swatchPrimary," +
          "body.bomb-mode #swatchAccent { display: none; }" +
          "body.bomb-mode #display { fill: #ff4444 !important; }" +
          "body.bomb-mode #titleh1 { fill: #ff6666 !important; }" +
          "body.bomb-mode #startstop {" +
          "  background: #111 !important;" +
          "  color: #ff4444;" +
          "  border: 2px solid #ff4444;" +
          "}" +
          "body.bomb-mode #startstop.stop {" +
          "  background: #cc0000 !important;" +
          "  color: #fff;" +
          "  border: 2px solid #ff6600;" +
          "}" +
          "#bomb-overlay { display: none; }" +
          "body.bomb-mode #bomb-overlay { display: block; }" +
          "body.bomb-mode.booming #bomb-overlay { opacity: 0; }" +
          "#boom-flag {" +
          "  display: none;" +
          "  transform-box: fill-box;" +
          "  transform-origin: 50% 50%;" +
          "}" +
          "body.bomb-mode.booming #boom-flag {" +
          "  display: block;" +
          "  animation: boomIn 0.6s cubic-bezier(.36,.07,.19,.97) both;" +
          "}" +
          "@keyframes boomIn {" +
          "  0%   { opacity:0; transform:scale(0.05) rotate(-20deg); }" +
          "  60%  { opacity:1; transform:scale(1.12) rotate(4deg); }" +
          "  100% { opacity:1; transform:scale(1) rotate(0deg); }" +
          "}" +
          "@keyframes spark { from { opacity:1; } to { opacity:0.15; } }" +
          ".fuse-spark { animation: spark 0.35s infinite alternate; }";
        document.head.appendChild(css);

        // --- Give existing background rects IDs so CSS can hide them ---
        var rects = svg.querySelectorAll("rect");
        if (rects[0] && !rects[0].id) rects[0].id = "clock-bg-1";
        if (rects[1] && !rects[1].id) rects[1].id = "clock-bg-2";
        if (rects[2] && !rects[2].id) rects[2].id = "clock-half";

        // --- Build bomb SVG overlay ---
        var bombG = document.createElementNS(ns, "g");
        bombG.id = "bomb-overlay";
        bombG.innerHTML =
          // Dark background fills the clock area
          '<rect x="0" y="10" width="100" height="100" fill="#0d0d1a"/>' +
          // Drop shadow
          '<ellipse cx="52" cy="101" rx="24" ry="4" fill="rgba(0,0,0,0.5)"/>' +
          // Bomb body
          '<circle cx="50" cy="72" r="27" fill="#0d0d0d"/>' +
          // Highlight
          '<ellipse cx="41" cy="62" rx="10" ry="7" fill="rgba(255,255,255,0.1)" transform="rotate(-30,41,62)"/>' +
          // Fuse socket
          '<rect x="46.5" y="44" width="7" height="5" rx="2" fill="#444"/>' +
          // Fuse rope
          '<path d="M50 44 C57 37,44 29,58 21" stroke="#c8a040" stroke-width="1.8" fill="none" stroke-linecap="round"/>' +
          // Spark glow (outer)
          '<circle class="fuse-spark" cx="58" cy="21" r="5" fill="rgba(255,160,0,0.2)"/>' +
          // Spark (inner)
          '<circle class="fuse-spark" cx="58" cy="21" r="2.5" fill="#ffcc00"/>' +
          // Spark rays
          '<g class="fuse-spark">' +
          '<line x1="58" y1="15" x2="58" y2="12" stroke="#ffdd00" stroke-width="1.3" stroke-linecap="round"/>' +
          '<line x1="63" y1="17" x2="66" y2="14" stroke="#ffdd00" stroke-width="1.3" stroke-linecap="round"/>' +
          '<line x1="63" y1="25" x2="66" y2="28" stroke="#ffdd00" stroke-width="1.3" stroke-linecap="round"/>' +
          '<line x1="53" y1="15" x2="50" y2="12" stroke="#ffdd00" stroke-width="1.3" stroke-linecap="round"/>' +
          "</g>";

        // --- Build BOOM flag ---
        var boomG = document.createElementNS(ns, "g");
        boomG.id = "boom-flag";
        var outerPts = burstPoints(50, 57, 42, 22, 12);
        var innerPts = burstPoints(50, 57, 35, 18, 12);
        boomG.innerHTML =
          // Outer gold starburst
          '<polygon points="' +
          outerPts +
          '" fill="#FFD700"/>' +
          // Inner orange-red starburst
          '<polygon points="' +
          innerPts +
          '" fill="#FF4500"/>' +
          // White center disc for text
          '<circle cx="50" cy="57" r="15" fill="#FFF8E0"/>' +
          // BOOM! text
          '<text x="50" y="54" text-anchor="middle" alignment-baseline="middle"' +
          ' font-size="11" font-weight="bold" font-family="Impact,Arial Black,sans-serif"' +
          ' fill="#CC0000" stroke="#000" stroke-width="0.5">BOOM!</text>' +
          // Decorative small stars scattered around the burst
          '<polygon fill="#FFD700" points="16,20 17.5,25 22,23 18.5,27 20,32 16,29 12,32 13.5,27 10,23 14.5,25"/>' +
          '<polygon fill="#FF4500" points="84,16 85.2,20.5 90,19 86.5,23 88,28 84,25.5 80,28 81.5,23 78,19 82.8,20.5"/>' +
          '<circle cx="90" cy="78" r="3.5" fill="#FFD700"/>' +
          '<circle cx="12" cy="80" r="2.5" fill="#FF4500"/>' +
          '<circle cx="50" cy="100" r="2" fill="#FFD700"/>';

        svg.appendChild(bombG);
        svg.appendChild(boomG);

        // --- Toggle helpers ---
        var btn = document.getElementById("startstop");
        var titleEl = document.getElementById("titleh1");
        var savedTitle = null;

        function enterBomb() {
          bombActive = true;
          savedTitle = titleEl.textContent.trim();
          titleEl.textContent = "Who is the bomb?";
          document.body.classList.add("bomb-mode");
          btn.textContent = btn.getAttribute("class").match("stop")
            ? "Tock!"
            : "Tick!";
        }

        function exitBomb() {
          bombActive = false;
          document.body.classList.remove("bomb-mode", "booming");
          titleEl.textContent =
            savedTitle !== null ? savedTitle : titleEl.textContent;
          savedTitle = null;
          btn.textContent = btn.getAttribute("class").match("stop")
            ? "Wait for it!"
            : "Go for it!";
        }

        // --- Wrap fireAlarm so BOOM triggers in bomb mode ---
        var origFireAlarm = window.fireAlarm;
        window.fireAlarm = function () {
          origFireAlarm.apply(this, arguments);
          if (bombActive) {
            // fireAlarm replaces body class; re-add bomb classes after
            document.body.classList.add("bomb-mode", "booming");
          }
        };

        // --- Ctrl+B activates / deactivates bomb mode ---
        document.addEventListener("keydown", function (e) {
          if (e.ctrlKey && e.key === "b") {
            e.preventDefault();
            bombActive ? exitBomb() : enterBomb();
          }
        });
      })();
    </script>
    <!-- ==================== END EASTER EGG ==================== -->
  </body>
</html>
